(this["webpackJsonpspotify-clone"]=this["webpackJsonpspotify-clone"]||[]).push([[0],{19:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(14),o=n.n(r),s=(n(19),n(3)),i="".concat("https://accounts.spotify.com/authorize","?client_id=").concat("3fc13371e36b4dc0a569cd63066b7490","&response_type=code&redirect_uri=").concat("https://nameless-thicket-51178.herokuapp.com/","&scope=").concat(["user-read-currently-playing","user-read-recently-played","user-read-playback-state","user-top-read","user-modify-playback-state","streaming","user-read-email","user-read-private","user-library-read","user-library-modify"].join("%20"),"&show_dialog=true"),u=n(0);var d=function(){return Object(u.jsx)("div",{className:"w-screen h-screen grid place-items-center ",children:Object(u.jsx)("a",{className:"bg-spotify-green rounded-full px-8 py-5 font-bold text-xl tracking-widest filter hover:brightness-110 duration-150 min-w-max",href:i,children:"LOGIN TO SPOTIFY"})})},l=n(4),f=n.n(l);var b=function(e){var t=Object(c.useState)(""),n=Object(s.a)(t,2),a=n[0],r=n[1],o=Object(c.useState)(""),i=Object(s.a)(o,2),u=i[0],d=i[1],l=Object(c.useState)(""),b=Object(s.a)(l,2),h=b[0],j=b[1];return Object(c.useEffect)((function(){f.a.post("/login",{code:e}).then((function(e){console.log(e.data),r(e.data.accessToken),d(e.data.refreshToken),j(e.data.expiresIn),window.history.pushState({},null,"/")})).catch((function(){window.location="/"}))}),[e]),Object(c.useEffect)((function(){var e=setInterval((function(){u&&f.a.post("/refresh").then((function(e){r(e.data.accessToken),j(e.data.expiresIn)})).catch((function(){window.location="/"}))}),1e3*(h-60));return function(){return clearInterval(e)}}),[u,h]),a};var h=function(e){var t=e.code,n=b(t),a=Object(c.useState)([]),r=Object(s.a)(a,2),o=r[0],i=r[1];return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{onClick:function(){f.a.get("/recently-played").then((function(e){console.log(e),i(e.data.list)})).catch((function(e){console.log(e)}))},children:n}),Object(u.jsx)("div",{children:o.map((function(e,t){return Object(u.jsx)("h1",{children:e.track.name},t)}))})]})};var j=function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){a(new URLSearchParams(window.location.search).get("code"))}),[]),n?Object(u.jsx)(h,{code:n}):Object(u.jsx)(d,{})},p=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,40)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),c(e),a(e),r(e),o(e)}))};o.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(j,{})}),document.getElementById("root")),p()}},[[39,1,2]]]);
//# sourceMappingURL=main.ade7a0db.chunk.js.map