{"version":3,"sources":["spotify.js","components/Login.jsx","components/useAuth.jsx","components/Dashboard.jsx","App.js","reportWebVitals.js","index.js"],"names":["accessUrl","join","Login","className","href","useAuth","code","useState","accessToken","setAccessToken","refreshToken","setRefreshToken","expiresIn","setExpiresIn","useEffect","axios","post","then","res","console","log","data","window","history","pushState","catch","location","interval","setInterval","clearInterval","Dashboard","list","setList","onClick","get","err","map","index","track","name","App","setCode","URLSearchParams","search","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"qMAeaA,EAAS,UAfL,yCAeK,sBAdL,mCAcK,4CAbF,gDAaE,kBAZP,CACX,8BACA,4BACA,2BACA,gBACA,6BACA,YACA,kBACA,oBACA,oBACA,uBAEsHC,KACxH,OADoB,qB,OCCPC,MAbf,WACE,OACE,qBAAKC,UAAU,6CAAf,SACE,mBACEA,UAAU,+HACVC,KAAMJ,EAFR,iC,gBCuCSK,MA1Cf,SAAiBC,GACf,MAAsCC,mBAAS,IAA/C,mBAAOC,EAAP,KAAoBC,EAApB,KACA,EAAwCF,mBAAS,IAAjD,mBAAOG,EAAP,KAAqBC,EAArB,KACA,EAAkCJ,mBAAS,IAA3C,mBAAOK,EAAP,KAAkBC,EAAlB,KAoCA,OAlCAC,qBAAU,WACRC,IACGC,KAAK,SAAU,CACdV,SAEDW,MAAK,SAACC,GACLC,QAAQC,IAAIF,EAAIG,MAChBZ,EAAeS,EAAIG,KAAKb,aACxBG,EAAgBO,EAAIG,KAAKX,cACzBG,EAAaK,EAAIG,KAAKT,WACtBU,OAAOC,QAAQC,UAAU,GAAI,KAAM,QAEpCC,OAAM,WACLH,OAAOI,SAAW,SAErB,CAACpB,IAEJQ,qBAAU,WACR,IAAMa,EAAWC,aAAY,WACvBlB,GACFK,IACGC,KAAK,YACLC,MAAK,SAACC,GACLT,EAAeS,EAAIG,KAAKb,aACxBK,EAAaK,EAAIG,KAAKT,cAEvBa,OAAM,WACLH,OAAOI,SAAW,SAGJ,KAAlBd,EAAY,KAChB,OAAO,kBAAMiB,cAAcF,MAC1B,CAACjB,EAAcE,IAEXJ,GCVMsB,MA5Bf,YAA8B,IAATxB,EAAQ,EAARA,KACbE,EAAcH,EAAQC,GAC5B,EAAwBC,mBAAS,IAAjC,mBAAOwB,EAAP,KAAaC,EAAb,KAcA,OACE,qCACE,qBAAKC,QAAS,WAbhBlB,IACGmB,IAAI,oBACJjB,MAAK,SAACC,GACLC,QAAQC,IAAIF,GACZc,EAAQd,EAAIG,KAAKU,SAElBN,OAAM,SAACU,GAENhB,QAAQC,IAAIe,OAKd,SAAkC3B,IAClC,8BACGuB,EAAKK,KAAI,SAACL,EAAMM,GAAP,OACR,6BAAiBN,EAAKO,MAAMC,MAAnBF,YCXJG,MAVf,WACE,MAAwBjC,mBAAS,IAAjC,mBAAOD,EAAP,KAAamC,EAAb,KAMA,OAJA3B,qBAAU,WACR2B,EAAQ,IAAIC,gBAAgBpB,OAAOI,SAASiB,QAAQT,IAAI,WACvD,IAEI5B,EAAO,cAAC,EAAD,CAAWA,KAAMA,IAAW,cAAC,EAAD,KCC7BsC,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqB7B,MAAK,YAAkD,IAA/C8B,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCDdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,SAG1BZ,M","file":"static/js/main.ade7a0db.chunk.js","sourcesContent":["const auth_url = \"https://accounts.spotify.com/authorize\";\nconst clientId = \"3fc13371e36b4dc0a569cd63066b7490\";\nconst redirectUri = \"https://nameless-thicket-51178.herokuapp.com/\";\nconst scopes = [\n    \"user-read-currently-playing\",\n    \"user-read-recently-played\",\n    \"user-read-playback-state\",\n    \"user-top-read\",\n    \"user-modify-playback-state\",\n    \"streaming\",\n    \"user-read-email\",\n    \"user-read-private\",\n    \"user-library-read\",\n    \"user-library-modify\",\n];\nexport const accessUrl = `${auth_url}?client_id=${clientId}&response_type=code&redirect_uri=${redirectUri}&scope=${scopes.join(\n  \"%20\"\n)}&show_dialog=true`;","import React from \"react\";\nimport { accessUrl } from \"../spotify\";\n\nfunction Login() {\n  return (\n    <div className=\"w-screen h-screen grid place-items-center \">\n      <a\n        className=\"bg-spotify-green rounded-full px-8 py-5 font-bold text-xl tracking-widest filter hover:brightness-110 duration-150 min-w-max\"\n        href={accessUrl}\n      >\n        LOGIN TO SPOTIFY\n      </a>\n    </div>\n  );\n}\n\nexport default Login;\n","import { useState, useEffect } from \"react\";\nimport axios from \"axios\";\n\nfunction useAuth(code) {\n  const [accessToken, setAccessToken] = useState(\"\");\n  const [refreshToken, setRefreshToken] = useState(\"\");\n  const [expiresIn, setExpiresIn] = useState(\"\");\n\n  useEffect(() => {\n    axios\n      .post(\"/login\", {\n        code,\n      })\n      .then((res) => {\n        console.log(res.data);\n        setAccessToken(res.data.accessToken);\n        setRefreshToken(res.data.refreshToken);\n        setExpiresIn(res.data.expiresIn);\n        window.history.pushState({}, null, \"/\");\n      })\n      .catch(() => {\n        window.location = \"/\";\n      });\n  }, [code]);\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      if (refreshToken) {\n        axios\n          .post(\"/refresh\")\n          .then((res) => {\n            setAccessToken(res.data.accessToken);\n            setExpiresIn(res.data.expiresIn);\n          })\n          .catch(() => {\n            window.location = \"/\";\n          });\n      }\n    }, (expiresIn - 60) * 1000);\n    return () => clearInterval(interval);\n  }, [refreshToken, expiresIn]);\n\n  return accessToken;\n}\n\nexport default useAuth;\n","import React, { useState } from \"react\";\nimport useAuth from \"./useAuth\";\nimport axios from \"axios\";\n\nfunction Dashboard({ code }) {\n  const accessToken = useAuth(code);\n  const [list, setList] = useState([]);\n\n  const getTracks = () => {\n    axios\n      .get(\"/recently-played\")\n      .then((res) => {\n        console.log(res);\n        setList(res.data.list);\n      })\n      .catch((err) => {\n        // window.location = \"/\";\n        console.log(err);\n      });\n  };\n  return (\n    <>\n      <div onClick={() => getTracks()}>{accessToken}</div>\n      <div>\n        {list.map((list, index) => (\n          <h1 key={index}>{list.track.name}</h1>\n        ))}\n      </div>\n    </>\n  );\n}\n\nexport default Dashboard;\n","import React, { useState, useEffect } from \"react\";\nimport Login from \"./components/Login\";\nimport Dashboard from \"./components/Dashboard\";\n\nfunction App() {\n  const [code, setCode] = useState(\"\");\n\n  useEffect(() => {\n    setCode(new URLSearchParams(window.location.search).get(\"code\"));\n  }, []);\n\n  return code ? <Dashboard code={code} /> : <Login />;\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\nreportWebVitals();\n"],"sourceRoot":""}