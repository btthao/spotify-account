{"version":3,"sources":["components/Button.jsx","spotify.js","components/Helmet.jsx","components/Login.jsx","data/nav.js","components/context.jsx","components/Nav.jsx","components/home/TrendItem.jsx","components/home/ListeningTrends.jsx","components/Image.jsx","components/Item.jsx","components/home/TopList.jsx","components/home/Home.jsx","components/recent/Recent.jsx","components/playlists/PlaylistsItem.jsx","data/icon.png","components/playlists/Playlists.jsx","components/Track.jsx","components/playlists/SearchResult.jsx","components/playlists/AddSongs.jsx","components/playlists/Playlist.jsx","components/Dashboard.jsx","components/useToken.jsx","App.js","reportWebVitals.js","index.js","components/reducer.jsx"],"names":["Button","link","text","blank","className","href","target","rel","accessUrl","join","Head","title","Helmet","htmlAttributes","lang","name","content","Login","links","id","url","icon","UserContext","createContext","ContextProvider","reducer","initialState","children","Provider","value","useReducer","useUserContext","useContext","trimPath","path","lastIndexOf","substring","withRouter","history","logout","headers","dispatch","useState","window","location","pathname","setPathname","userData","setUserData","useEffect","listen","axios","get","then","res","data","type","payload","catch","err","console","log","Avatar","alt","display_name","src","images","length","onClick","map","item","to","TrendItem","img","ListeningTrends","artist","track","external_urls","spotify","album","Image","Item","trackName","TopList","items","artists","i","Home","topArtists","setTopArtists","artistsLoad","setArtistsLoad","topTracks","setTopTracks","tracksLoad","setTracksLoad","loading","setLoading","Recent","list","setList","tracks","Playlists","playlists","setPlaylists","playlist","SpotifyIcon","total","convertTime","ms","minutes","Math","floor","seconds","toFixed","Track","duration","edit","Result","AddSongs","search","setSearch","results","setResults","alert","setAlert","query","setQuery","newQuery","encodeURIComponent","trim","fetch","placeholder","onChange","e","index","reduce","smallest","image","height","uri","post","setTimeout","color","Playlist","userId","setTracks","setName","owner","setOwner","setLink","setImg","ownerId","setOwnerId","setEdit","snapshotId","setSnapshotId","useParams","modal","setModal","getPlaylist","useCallback","snapshot_id","duration_ms","deleteTrack","Dashboard","exact","useToken","code","setCode","accessToken","setAccessToken","refreshToken","setRefreshToken","expiresIn","setExpiresIn","currentCode","localStorage","getItem","JSON","parse","Object","keys","getCode","URLSearchParams","timepassed","Date","now","timestamp","access_token","refresh_token","setItem","stringify","pushState","interval","setInterval","clearInterval","App","token","setToken","setHeaders","Authorization","removeItem","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","state","action","document","getElementById"],"mappings":"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","file":"static/js/main.5a2afaa3.chunk.js","sourcesContent":["import React from \"react\";\n\nfunction Button({ link, text, blank }) {\n  return (\n    <a\n      className=\"bg-spotify-green m-auto rounded-full px-4 py-3 font-bold tracking-wider filter hover:brightness-110 duration-150 min-w-max uppercase sm:px-8 sm:py-5 sm:text-xl\"\n      href={link}\n      target={blank ? \"_blank\" : \"\"}\n      rel=\"noreferrer\"\n    >\n      {text}\n    </a>\n  );\n}\n\nexport default Button;\n","const auth_url = \"https://accounts.spotify.com/authorize\";\nconst clientId = \"3fc13371e36b4dc0a569cd63066b7490\";\n//const redirectUri = \"http://localhost:4000/\";//\nconst redirectUri = \"https://spotify-account.herokuapp.com/\";\nconst scopes = [\n    \"user-read-recently-played\",\n    \"user-top-read\",\n    \"user-read-email\",\n    \"user-read-private\",\n    \"playlist-read-private\",\n    \"playlist-modify-private\",\n    \"playlist-modify-public\",\n];\nexport const accessUrl = `${auth_url}?client_id=${clientId}&response_type=code&redirect_uri=${redirectUri}&scope=${scopes.join(\n  \"%20\"\n)}&show_dialog=true`;","import React from \"react\";\nimport { Helmet } from \"react-helmet\";\n\nfunction Head({ title }) {\n  return (\n    <Helmet title={title} htmlAttributes={{ lang: \"en\" }}>\n      <meta name=\"description\" content=\"Spotify stuff\" />\n      <meta name=\"author\" content=\"Thao Bui\" />\n    </Helmet>\n  );\n}\n\nexport default Head;\n","import React from \"react\";\nimport Button from \"./Button\";\nimport { accessUrl } from \"../spotify\";\nimport Helmet from \"./Helmet\";\n\nfunction Login() {\n  return (\n    <div className=\"w-screen h-screen grid place-items-center \">\n      <Helmet title=\"Log in\" />\n      <Button text=\"LOGIN TO SPOTIFY\" link={accessUrl} />\n    </div>\n  );\n}\n\nexport default Login;\n","import React from \"react\";\nimport HomeIcon from '@material-ui/icons/Home';\nimport ReplayIcon from '@material-ui/icons/Replay';\nimport LibraryMusicIcon from '@material-ui/icons/LibraryMusic';\n\nexport const links = [{\n        id: 1,\n        url: \"/\",\n        name: \"Home\",\n        icon: < HomeIcon / >\n    },\n    {\n        id: 2,\n        url: \"/playlists\",\n        name: \"Playlists\",\n        icon: < LibraryMusicIcon / >\n    },\n    {\n        id: 3,\n        url: \"/recent\",\n        name: \"Recent\",\n        icon: < ReplayIcon / >\n    },\n];","import React, { createContext, useContext, useReducer } from \"react\";\n\nexport const UserContext = createContext();\n\nexport const ContextProvider = ({ reducer, initialState, children }) => (\n  <UserContext.Provider value={useReducer(reducer, initialState)}>\n    {children}\n  </UserContext.Provider>\n);\n\nexport const useUserContext = () => useContext(UserContext);\n","import React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { withRouter } from \"react-router-dom\";\nimport { links } from \"../data/nav\";\nimport axios from \"axios\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport { useUserContext } from \"./context\";\n\nconst trimPath = (path) => {\n  return path.lastIndexOf(\"/\") === 0\n    ? path\n    : path.substring(0, path.lastIndexOf(\"/\"));\n};\n\nfunction Nav({ history, logout, headers }) {\n  const [state, dispatch] = useUserContext();\n  const [pathname, setPathname] = useState(trimPath(window.location.pathname));\n  const [userData, setUserData] = useState({});\n  useEffect(() => {\n    history.listen((location) => {\n      setPathname(trimPath(location.pathname));\n    });\n  }, [history]);\n\n  useEffect(() => {\n    axios\n      .get(\"https://api.spotify.com/v1/me\", { headers })\n      .then((res) => {\n        setUserData(res.data);\n        dispatch({ type: \"SET_USER\", payload: res.data.id });\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [headers]);\n\n  return (\n    <div className=\" fixed flex bottom-0 left-0 w-full z-70 bg-black bg-opacity-90 lg:top-0 lg:bg-opacity-50 lg:w-52 lg:h-screen lg:flex-col overflow-hidden\">\n      <div className=\"fixed right-1 top-3 flex border border-s-grey rounded-full bg-s-grey lg:relative lg:w-full lg:grid lg:place-items-center lg:px-1 lg:py-10 lg:gap-3 lg:border-0 lg:top-0 lg:right-0 lg:rounded-none lg:bg-transparent  text-center \">\n        <Avatar\n          alt={userData.display_name}\n          src={`${userData.images?.length > 0 ? userData.images[0].url : \"\"}`}\n          className=\"user-avatar\"\n        />\n        <h1 className=\"hidden overflow-hidden lg:block font-semibold text-lg  \">\n          {userData.display_name}\n        </h1>\n        <button\n          className=\" cursor-pointer text-xs rounded-full px-3 lg:py-1 lg:border border-spotify-green xs:hover:bg-spotify-green \"\n          onClick={logout}\n        >\n          Log Out\n        </button>\n      </div>\n      <ul className=\" flex w-full  border-gray-700 lg:border-b lg:flex-col\">\n        {links.map((item) => (\n          <li\n            key={item.id}\n            className=\" w-full lg:border-t border-gray-700 h-16 lg:h-12\"\n          >\n            <Link to={item.url} className=\"group flex h-full \">\n              <div\n                className={`hidden lg:block lg:w-1.5 lg:h-full bg-spotify-green  group-hover:opacity-100 \n                  ${pathname === item.url ? \"opacity-100\" : \"opacity-0\"}`}\n              ></div>\n              <div\n                className={`flex-1 flex flex-col  items-center justify-center lg:justify-start lg:flex-row group-hover:text-white group-hover:font-bold ${\n                  pathname === item.url\n                    ? \"text-white font-bold\"\n                    : \"text-gray-500 font-semibold\"\n                }`}\n              >\n                <div className=\"lg:mx-3\">{item.icon}</div>\n                <h6 className=\"text-xs sm:text-sm   lg:text-base\">\n                  {item.name}\n                </h6>\n              </div>\n            </Link>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n\nexport default withRouter(Nav);\n","import React from \"react\";\n\nfunction TrendItem({ type, name, img, link }) {\n  return (\n    <div\n      className=\" mt-24 relative w-full\n        pb-trending-90 bg-white bg-opacity-5 z-0 md:pb-trending-40\n        md:w-11/12 md:justify-self-start md:mt-16\"\n    >\n      <small className=\"absolute min-w-max -top-24 left-1/2 transform -translate-x-1/2  text-xs bg-opacity-40 bg-s-blue2 py-1 px-8 text-center  md:top-2 md:-left-2 md:translate-x-0 md:px-4\">\n        {type}\n      </small>\n      <div className=\" z-20 w-over absolute left-1/2 bottom-3  transform -translate-x-1/2 text-center md:top-12 md:w-4/6 md:-left-4 md:translate-x-0 md:text-left\">\n        <h3 className=\"truncate max-w-full bg-s-blue2 px-1 py-2 font-semibold xs:font-bold xs:text-xl md:pl-8\">\n          {name}\n        </h3>\n        <button className=\"mt-3 tracking-wider text-spotify-green font-bold text-sm md:pl-8\">\n          <a href={link} target=\"_blank\" rel=\"noreferrer\">\n            Play now\n          </a>\n        </button>\n      </div>\n      <div className=\" absolute z-10 top-0 left-1/2 w-85 h-0 pb-trending-85  transform -translate-x-1/2 -translate-y-12 bg-gray-900 md:w-1/2 md:translate-x-6 md:pb-trending-50 \">\n        <img\n          src={img}\n          alt={name}\n          className=\"w-full h-full absolute top-0 left-0 object-contain \"\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default TrendItem;\n","import React from \"react\";\nimport TrendItem from \"./TrendItem\";\n\nfunction ListeningTrends({ artist, track }) {\n  return (\n    <div className=\"grid place-items-center py-14 px-8  md:px-14  \">\n      <h1 className=\"mb-10 text-2xl xs:text-4xl sm:text-5xl md:text-6xl text-center font-extrabold \">\n        Your listening trends\n      </h1>\n\n      <div className=\" grid w-full gap-10  place-items-center  max-w-sm md:max-w-xl xl:grid-cols-2 xl:max-w-7xl xl:gap-14\">\n        <TrendItem\n          type=\"Top Artist\"\n          name={artist.name}\n          img={artist.images[0].url}\n          link={artist.external_urls.spotify}\n        />\n        <TrendItem\n          type=\"Top Track\"\n          name={track.name}\n          img={track.album.images[0].url}\n          link={track.external_urls.spotify}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default ListeningTrends;\n","import React from \"react\";\n\nfunction Image({ img, name }) {\n  return (\n    <div className=\"w-full pb-item-100 relative overflow-hidden bg-gray-900 shadow-2xl \">\n      <img\n        src={img}\n        alt={name}\n        className=\"  w-full h-full absolute top-0 left-0 object-contain \"\n      />\n    </div>\n  );\n}\n\nexport default Image;\n","import React from \"react\";\nimport PlayCircleOutlineIcon from \"@material-ui/icons/PlayCircleOutline\";\nimport Image from \"./Image\";\n\nfunction Item({ img, name, link, trackName }) {\n  return (\n    <div className=\"w-full group relative\">\n      {/* img */}\n      <Image img={img} name={trackName || name} />\n      {/* info */}\n      <div className=\"w-full flex flex-col items-center justify-center text-center md:absolute top-0 left-0  md:h-full md:opacity-0 md:bg-black md:bg-opacity-80 md:group-hover:opacity-100 md:transition md:duration-100 overflow-hidden \">\n        <a\n          href={link}\n          target=\"_blank\"\n          rel=\"noreferrer\"\n          className=\"hidden md:block\"\n        >\n          <PlayCircleOutlineIcon className=\"play-icon\" />\n        </a>\n        {/* trackname */}\n        {trackName && (\n          <p className=\"truncate max-w-full px-2 mt-1 font-semibold text-xs xs:text-sm xl:text-base\">\n            {trackName}\n          </p>\n        )}\n        {/* artist name */}\n        <p\n          className={`px-2 mt-0.5 font-medium text-xs xs:text-sm xl:text-base  ${\n            trackName ? \"text-gray-400\" : \"text-white\"\n          } `}\n        >\n          {name.length > 40 ? name.substring(0, 40) + \" ...\" : name}\n        </p>\n        <a\n          href={link}\n          target=\"_blank\"\n          rel=\"noreferrer\"\n          className=\"md:hidden mt-0.5 tracking-wider text-spotify-green font-semibold text-xs sm:text-sm \"\n        >\n          Play now\n        </a>\n      </div>\n    </div>\n  );\n}\n\nexport default Item;\n","import React from \"react\";\nimport Item from \"../Item\";\n\nfunction TopList({ name, items }) {\n  return (\n    <div className=\"grid w-full place-items-center mt-6 py-6  lg:px-8  \">\n      <h1 className=\"mb-6 px-2 text-xl xs:text-3xl lg:text-4xl text-center font-bold\">\n        {name}\n      </h1>\n      <div className=\"grid w-full gap-5 grid-cols-2 xs:p-5  md:grid-cols-4 max-w-7xl \">\n        {items.map((item) => (\n          <Item\n            key={item.id}\n            trackName={name === \"Top Artists\" ? \"\" : item.name}\n            name={\n              name === \"Top Artists\"\n                ? item.name\n                : item.artists.map((i) => i.name).join(\", \")\n            }\n            img={\n              name === \"Top Artists\"\n                ? item.images[0].url\n                : item.album.images[0].url\n            }\n            link={item.external_urls.spotify}\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default TopList;\n","import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport ListeningTrends from \"./ListeningTrends\";\nimport TopList from \"./TopList\";\nimport Helmet from \"../Helmet\";\n\nfunction Home({ headers }) {\n  const [topArtists, setTopArtists] = useState([]);\n  const [artistsLoad, setArtistsLoad] = useState(true);\n  const [topTracks, setTopTracks] = useState([]);\n  const [tracksLoad, setTracksLoad] = useState(true);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    axios\n      .get(\n        \"https://api.spotify.com/v1/me/top/artists?limit=8&time_range=long_term\",\n        {\n          headers,\n        }\n      )\n      .then((res) => {\n        setTopArtists(res.data.items);\n        setArtistsLoad(false);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n\n    axios\n      .get(\n        \"https://api.spotify.com/v1/me/top/tracks?limit=8&time_range=long_term\",\n        { headers }\n      )\n      .then((res) => {\n        setTopTracks(res.data.items);\n        setTracksLoad(false);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }, [headers]);\n\n  useEffect(() => {\n    if (!tracksLoad && !artistsLoad) {\n      setLoading(false);\n    }\n  }, [tracksLoad, artistsLoad]);\n\n  return (\n    <div className=\" lg:pl-52  bg-s-blue3 bg-gradient-to-r from-s-blue3 to-s-purple2 pb-20 min-h-screen grid  \">\n      <Helmet title=\"Home\" />\n      {loading && (\n        <h1 className=\"text-center font-bold text-xl sm:text-3xl self-center \">\n          Loading...\n        </h1>\n      )}\n      {!loading &&\n        (topArtists.length === 0 && topTracks.length === 0 ? (\n          <h1 className=\"text-center font-bold text-xl sm:text-3xl self-center \">\n            No data to show...\n          </h1>\n        ) : (\n          <div>\n            <ListeningTrends artist={topArtists[0]} track={topTracks[0]} />\n            <TopList name=\"Top Artists\" items={topArtists} />\n            <TopList name=\"Top Tracks\" items={topTracks} />\n          </div>\n        ))}\n    </div>\n  );\n}\n\nexport default Home;\n","import React, { useState, useEffect } from \"react\";\nimport Item from \"../Item\";\nimport axios from \"axios\";\nimport Button from \"../Button\";\nimport Helmet from \"../Helmet\";\n\nfunction Recent({ headers }) {\n  const [list, setList] = useState([]);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    axios\n      .get(\"https://api.spotify.com/v1/me/player/recently-played?limit=6\", {\n        headers,\n      })\n      .then((res) => {\n        setList(res.data.items);\n        setLoading(false);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }, [headers]);\n\n  return (\n    <div className=\"lg:pl-52 bg-s-purple1 bg-gradient-to-tr from-s-purple1 via-gray-900 to-s-blue1 pb-20 min-h-screen grid \">\n      <Helmet title=\"Recent\" />\n      {loading && (\n        <h1 className=\"text-center font-bold text-xl sm:text-3xl self-center \">\n          Loading...\n        </h1>\n      )}\n      {!loading &&\n        (list.length === 0 ? (\n          <h1 className=\"text-center font-bold text-xl sm:text-3xl self-center \">\n            No data to show...\n          </h1>\n        ) : (\n          <div className=\"text-center pt-12\">\n            <h1 className=\" mb-10 text-3xl xs:text-4xl sm:text-5xl md:text-6xl text-center font-extrabold \">\n              Jump Back In\n            </h1>\n            <Button\n              blank\n              text=\"OPEN WEB PLAYER\"\n              link=\"https://open.spotify.com/\"\n            />\n            <div className=\" mt-6 grid m-auto w-full gap-5 grid-cols-2 py-5 xs:p-5 md:py-12 md:px-8  md:grid-cols-3 md:w-11/12 lg:w-10/12 max-w-7xl\">\n              {list.map(({ track }) => (\n                <Item\n                  key={track.id}\n                  trackName={track.name}\n                  name={track.artists.map((i) => i.name).join(\", \")}\n                  link={track.external_urls.spotify}\n                  img={track.album.images[0].url}\n                />\n              ))}\n            </div>\n          </div>\n        ))}\n    </div>\n  );\n}\n\nexport default Recent;\n","import React from \"react\";\nimport Image from \"../Image\";\nimport { Link } from \"react-router-dom\";\n\nfunction Item({ img, name, tracks, id }) {\n  return (\n    <Link to={`/playlists/${id}`} className=\"w-full group relative\">\n      {/* img */}\n      <Image img={img} name={name} />\n      {/* info */}\n      <div className=\"w-full mt-2 flex flex-col items-center justify-center text-center  overflow-hidden \">\n        <h6 className=\" px-2 mt-0.5 font-medium text-xs xs:text-sm xl:text-base group-hover:underline \">\n          {name.length > 70 ? name.substring(0, 70) + \" ...\" : name}\n        </h6>\n        <p className=\"text-sm text-spotify-green\">\n          {tracks > 1 ? `${tracks} tracks` : `${tracks} track`}\n        </p>\n      </div>\n    </Link>\n  );\n}\n\nexport default Item;\n","export default __webpack_public_path__ + \"static/media/icon.9d20ff57.png\";","import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport Item from \"./PlaylistsItem\";\nimport SpotifyIcon from \"../../data/icon.png\";\nimport Helmet from \"../Helmet\";\n\nfunction Playlists({ headers }) {\n  const [playlists, setPlaylists] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    axios\n      .get(\"https://api.spotify.com/v1/me/playlists\", { headers })\n      .then((res) => {\n        setPlaylists(res.data.items);\n        setLoading(false);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }, [headers]);\n  return (\n    <div className=\"lg:pl-52  bg-s-blue2 bg-gradient-to-r from-s-purple2 to-s-blue2 pb-20 min-h-screen  grid \">\n      <Helmet title=\"Playlists\" />\n      {loading && (\n        <h1 className=\"text-center font-bold text-xl sm:text-3xl self-center \">\n          Loading...\n        </h1>\n      )}\n      {!loading &&\n        (playlists.length === 0 ? (\n          <h1 className=\"text-center font-bold text-xl sm:text-3xl self-center \">\n            You have no playlists.\n          </h1>\n        ) : (\n          <div className=\"text-center pt-14\">\n            <h1 className=\" mb-4 text-3xl xs:text-4xl sm:text-5xl md:text-6xl text-center font-extrabold \">\n              Your Playlists\n            </h1>\n            <div className=\"grid gap-4 m-auto  grid-cols-2 py-5 xs:px-5 sm:grid-cols-3 sm:gap-7 lg:grid-cols-4 max-w-7xl\">\n              {playlists.map((playlist) => (\n                <Item\n                  key={playlist.id}\n                  img={\n                    playlist.images.length > 0\n                      ? playlist.images[0].url\n                      : SpotifyIcon\n                  }\n                  name={playlist.name}\n                  tracks={playlist.tracks.total}\n                  id={playlist.id}\n                />\n              ))}\n            </div>\n          </div>\n        ))}\n    </div>\n  );\n}\n\nexport default Playlists;\n","import React from \"react\";\nimport Image from \"./Image\";\nimport RemoveIcon from \"@material-ui/icons/Remove\";\n\nconst convertTime = (ms) => {\n  const minutes = Math.floor(ms / 60000);\n  const seconds = ((ms % 60000) / 1000).toFixed(0);\n  return seconds === 60\n    ? minutes + 1 + \":00\"\n    : minutes + \":\" + (seconds < 10 ? \"0\" : \"\") + seconds;\n};\n\nfunction Track({ name, img, artist, album, duration, edit, onClick }) {\n  return (\n    <div className=\" flex md:grid md:grid-cols-track md:gap-4 w-full min-w-0  \">\n      <div className=\"flex-1 flex items-center min-w-0\">\n        {edit && (\n          <RemoveIcon\n            className=\"delete-icon cursor-pointer border rounded-full mr-3 \"\n            onClick={onClick}\n          />\n        )}\n        <div className=\"w-10 mr-3 sm:w-12 \">\n          <Image name={name} img={img} />\n        </div>\n        <div className=\"min-w-0 w-full mr-3  \">\n          <h3 className=\"font-semibold text-sm md:text-base truncate \">\n            {name}\n          </h3>\n          <h4 className=\"text-xs truncate text-gray-400\">{artist}</h4>\n        </div>\n      </div>\n      <div className=\"min-w-0 hidden md:block self-center  \">\n        <h3 className=\"truncate text-sm text-gray-400 \">{album}</h3>\n      </div>\n      <div className=\"text-right text-xs sm:text-sm self-center\">\n        {convertTime(duration)}\n      </div>\n    </div>\n  );\n}\n\nexport default Track;\n","import React from \"react\";\nimport Image from \"../Image\";\nimport AddIcon from \"@material-ui/icons/Add\";\n\nfunction Result({ name, img, artist, onClick }) {\n  return (\n    <div className=\" flex w-full min-w-0  \">\n      <div className=\"flex-1 flex items-center min-w-0 mr-4\">\n        <div className=\"w-10 mr-3 sm:w-12 \">\n          <Image name={name} img={img} />\n        </div>\n        <div className=\"min-w-0 w-full  \">\n          <h3 className=\"font-semibold max-w-full text-sm md:text-base truncate \">\n            {name}\n          </h3>\n          <h4 className=\"text-xs truncate text-gray-400\">{artist}</h4>\n        </div>\n      </div>\n\n      <div className=\"self-center\">\n        <AddIcon\n          className=\"add-icon cursor-pointer border rounded-full\"\n          onClick={onClick}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default Result;\n","import React, { useState, useEffect } from \"react\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport axios from \"axios\";\nimport Result from \"./SearchResult\";\nimport BeatLoader from \"react-spinners/BeatLoader\";\n\nfunction AddSongs({ onClick, headers, playlist, name }) {\n  const [search, setSearch] = useState(\"\");\n  const [results, setResults] = useState([]);\n  const [alert, setAlert] = useState(false);\n  const [query, setQuery] = useState(\"\");\n\n  useEffect(() => {\n    const newQuery = encodeURIComponent(search.trim());\n    if (newQuery !== query) {\n      setQuery(newQuery);\n    }\n  }, [search, query]);\n\n  useEffect(() => {\n    let fetch = true;\n    if (!query) {\n      setResults([]);\n    }\n    if (headers && query) {\n      axios\n        .get(`https://api.spotify.com/v1/search?q=${query}&type=track`, {\n          headers,\n        })\n        .then((res) => {\n          if (!fetch) return;\n          setResults(res.data.tracks.items);\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    }\n\n    return () => {\n      fetch = false;\n    };\n  }, [headers, query]);\n\n  const addToPlaylist = (uri) => {\n    axios\n      .post(\"/add-track\", {\n        playlist,\n        track: [uri],\n      })\n      .then(() => {\n        setAlert(true);\n        setTimeout(() => setAlert(false), 1000);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  return (\n    <div className=\"fixed z-100 top-0 left-0 w-screen h-screen bg-gray-900 bg-opacity-90\">\n      <div\n        className={`absolute w-1/2 xs:w-1/3 sm:w-1/6 max-w-xs text-center bg-gray-800 bg-opacity-90 top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 px-3 py-4 rounded-md text-sm z-40 ${\n          alert ? \"block\" : \"hidden\"\n        } `}\n      >\n        Added to {name.length > 60 ? name.substring(0, 60) + \" ...\" : name}\n      </div>\n      <div className=\"absolute pb-6 px-4 top-1/2 left-1/2 w-full sm:w-5/6 max-w-lg h-full sm:h-5/6 max-h-120 transform bg-black -translate-x-1/2 -translate-y-1/2 overflow-scroll  \">\n        <div className=\" bg-black w-full pt-6 pb-2 z-30 sticky -top-1 flex flex-col \">\n          <CloseIcon\n            className=\"cursor-pointer mb-2 self-end \"\n            onClick={onClick}\n          />\n          <input\n            placeholder=\"Search tracks\"\n            className=\"bg-gray-700 rounded-sm w-full p-2 text-sm \"\n            value={search}\n            onChange={(e) => setSearch(e.target.value)}\n          />\n        </div>\n        <div className=\"grid pb-4 mt-4 gap-4\">\n          {results.length > 0 ? (\n            results.map((track, index) => (\n              <Result\n                key={index}\n                name={track.name}\n                img={\n                  track.album.images.reduce((smallest, image) => {\n                    if (image.height < smallest.height) return image;\n                    return smallest;\n                  }, track.album.images[0]).url\n                }\n                artist={track.artists.map((i) => i.name).join(\", \")}\n                onClick={() => {\n                  addToPlaylist(track.uri);\n                }}\n              />\n            ))\n          ) : (\n            <div className=\"grid w-full mt-8 place-items-center\">\n              <BeatLoader color=\"white\" />\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default AddSongs;\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport axios from \"axios\";\nimport Track from \"../Track\";\nimport Image from \"../Image\";\nimport SpotifyIcon from \"../../data/icon.png\";\nimport AccessTimeIcon from \"@material-ui/icons/AccessTime\";\nimport { useUserContext } from \"../context\";\nimport ListIcon from \"@material-ui/icons/List\";\nimport AddSongs from \"./AddSongs\";\nimport Helmet from \"../Helmet\";\n\nfunction Playlist({ headers }) {\n  const [{ userId }, dispatch] = useUserContext();\n  const [tracks, setTracks] = useState([]);\n  const [name, setName] = useState(\"\");\n  const [owner, setOwner] = useState(\"\");\n  const [link, setLink] = useState(\"\");\n  const [img, setImg] = useState(\"\");\n  const [loading, setLoading] = useState(true);\n  const [ownerId, setOwnerId] = useState(\"\");\n  const [edit, setEdit] = useState(false);\n  const [snapshotId, setSnapshotId] = useState(\"\");\n  const { id } = useParams();\n  const [modal, setModal] = useState(false);\n\n  const getPlaylist = useCallback(() => {\n    axios\n      .get(`https://api.spotify.com/v1/playlists/${id}`, {\n        headers,\n      })\n      .then((res) => {\n        const { external_urls, images, name, owner, tracks, snapshot_id } =\n          res.data;\n        setName(name);\n        setOwner(owner.display_name);\n        setOwnerId(owner.id);\n        setLink(external_urls.spotify);\n        setTracks(tracks.items);\n        setSnapshotId(snapshot_id);\n        setImg(images.length > 0 ? images[0].url : SpotifyIcon);\n        setLoading(false);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }, [headers, id]);\n\n  useEffect(() => {\n    getPlaylist();\n  }, [getPlaylist]);\n\n  const deleteTrack = (index) => {\n    axios\n      .post(\"/delete-track\", {\n        playlist: id,\n        track: [index],\n        snapshotId,\n      })\n      .then((res) => {\n        getPlaylist();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  const doneAdding = () => {\n    setEdit(false);\n    getPlaylist();\n    setModal(false);\n  };\n\n  return (\n    <div className=\"lg:pl-52  bg-gray-900  pb-20 min-h-screen grid  \">\n      <Helmet title={name} />\n\n      {modal && (\n        <AddSongs\n          playlist={id}\n          name={name}\n          headers={headers}\n          onClick={() => doneAdding()}\n        />\n      )}\n      {loading && (\n        <h1 className=\"text-center font-bold text-xl sm:text-3xl self-center \">\n          Loading...\n        </h1>\n      )}\n\n      {!loading && (\n        <div>\n          {/* header */}\n          <div className=\"w-full flex flex-col items-center pt-12 pb-8 xl:pb-20 px-6 xl:px-10 text-center bg-gradient-to-b from-yellow-400 via-purple-600  to-transparent xl:flex-row relative\">\n            <h1 className=\" z-20 mb-2 px-2 font-semibold text-lg xs:text-2xl md:text-4xl xl:hidden xs:px-6 \">\n              {name.length > 120 ? name.substring(0, 120) + \" ...\" : name}\n            </h1>\n\n            <div className=\"w-1/3 lg:w-full max-w-xs mb-2 z-20  \">\n              <Image name={name} img={img} />\n            </div>\n            <div className=\"  xl:ml-5 xl:text-left z-20 pb-4\">\n              <h1\n                className={`hidden mb-2 font-extrabold xl:block ${\n                  name.length > 60 ? \"text-4xl\" : \"text-6xl\"\n                }`}\n              >\n                {name.length > 120 ? name.substring(0, 120) + \" ...\" : name}\n              </h1>\n              <h3 className=\"text-sm mb-2 xl:text-base\">By {owner}</h3>\n              <h4 className=\"mb-3 text-sm text-spotify-green font-semibold\">\n                {tracks.length > 1\n                  ? `${tracks.length} tracks`\n                  : `${tracks.length} track`}\n                {userId === ownerId && (\n                  <span\n                    className=\"cursor-pointer\"\n                    onClick={() => setModal(true)}\n                  >\n                    {\" \"}\n                    &bull; Add songs\n                  </span>\n                )}\n              </h4>\n              <a\n                className=\"border mb-8 text-xs py-1.5 px-4 rounded-full border-spotify-green hover:bg-spotify-green font-semibold\"\n                href={link}\n                target=\"_blank\"\n                rel=\"noreferrer\"\n              >\n                Listen on Spotify\n              </a>\n            </div>\n            <div className=\"absolute bottom-0 h-full w-full left-0 z-0  bg-gray-900 bg-opacity-30\">\n              <div className=\"absolute bottom-0 h-1/4 w-full left-0 z-0  bg-gray-900 bg-opacity-20\" />\n            </div>\n          </div>\n          {/* body */}\n          <div className=\"w-full  mt-10 px-3 xs:px-5 grid gap-5 xl:px-10 \">\n            {userId === ownerId && tracks.length > 0 && (\n              <div className=\" w-full text-sm flex items-center justify-between \">\n                <button\n                  className=\" focus:outline-none flex items-center cursor-pointer\"\n                  onClick={() => setEdit(true)}\n                >\n                  <ListIcon className=\"mr-1\" /> Edit playlist\n                </button>\n                {edit && (\n                  <button\n                    className=\"focus:outline-none cursor-pointer\"\n                    onClick={() => setEdit(false)}\n                  >\n                    Done\n                  </button>\n                )}\n              </div>\n            )}\n            {tracks.length > 0 && (\n              <div className=\"hidden md:grid font-extralight text-gray-500 grid-cols-track gap-4 text-sm border-b pb-2 mb-3 border-gray-700 uppercase \">\n                <h1>Title</h1>\n                <h1>Album</h1>\n                <AccessTimeIcon className=\"justify-self-end time-icon \" />\n              </div>\n            )}\n            {tracks.map(({ track }, index) => (\n              <Track\n                key={index}\n                name={track.name}\n                img={\n                  track.album.images.reduce((smallest, image) => {\n                    if (image.height < smallest.height) return image;\n                    return smallest;\n                  }, track.album.images[0]).url\n                }\n                artist={track.artists.map((i) => i.name).join(\", \")}\n                duration={track.duration_ms}\n                album={track.album.name}\n                edit={edit}\n                onClick={() => deleteTrack(index)}\n              />\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default Playlist;\n","import React from \"react\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport Nav from \"./Nav\";\nimport Home from \"./home/Home\";\nimport Recent from \"./recent/Recent\";\nimport Playlists from \"./playlists/Playlists\";\nimport Playlist from \"./playlists/Playlist\";\n\nfunction Dashboard({ logout, headers }) {\n  return (\n    <Router>\n      <Nav logout={logout} headers={headers} />\n      <Switch>\n        <Route exact path=\"/\">\n          <Home headers={headers} />\n        </Route>\n        <Route exact path=\"/recent\">\n          <Recent headers={headers} />\n        </Route>\n        <Route exact path=\"/playlists\">\n          <Playlists headers={headers} />\n        </Route>\n        <Route exact path=\"/playlists/:id\">\n          <Playlist headers={headers} />\n        </Route>\n      </Switch>\n    </Router>\n  );\n}\n\nexport default Dashboard;\n","import { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { useUserContext } from \"./context\";\n\nfunction useToken() {\n  const [{ userId }, dispatch] = useUserContext();\n  const [code, setCode] = useState(\"\");\n  const [accessToken, setAccessToken] = useState(\"\");\n  const [refreshToken, setRefreshToken] = useState(\"\");\n  const [expiresIn, setExpiresIn] = useState(\"\");\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (!userId) {\n      setAccessToken(\"\");\n      setRefreshToken(\"\");\n      setExpiresIn(\"\");\n    }\n  }, [userId]);\n\n  useEffect(() => {\n    // get access code from local storage\n    const currentCode = localStorage.getItem(\"spotify-access-detail\")\n      ? JSON.parse(localStorage.getItem(\"spotify-access-detail\"))\n      : {};\n\n    if (Object.keys(currentCode).length === 0) {\n      // login for the first time, no access token in local storage\n      console.log(\"get code for first time\");\n      const getCode = new URLSearchParams(window.location.search).get(\"code\");\n      if (getCode) {\n        setCode(getCode);\n      } else {\n        setLoading(false);\n      }\n    } else {\n      //user has logged in before\n\n      const timepassed = (Date.now() - currentCode.timestamp) / 1000;\n      console.log(timepassed);\n      if (timepassed < 3500) {\n        // if access code hasn't expired (less than an hour)\n        console.log(\"relogin before one hour\");\n        axios\n          .post(\"/login\", {\n            access_token: currentCode.accessToken,\n            refresh_token: currentCode.refreshToken,\n          })\n          .then(() => {\n            setAccessToken(currentCode.accessToken);\n            setRefreshToken(currentCode.refreshToken);\n            setExpiresIn(3600);\n            setLoading(false);\n          })\n          .catch((err) => {\n            console.log(err);\n            window.location = \"/\";\n          });\n      } else if (timepassed < 1000000) {\n        // if access code has expired but can still use refresh token so no need to log in again (roughly 10 days)\n        console.log(\"relogin before 10 days\");\n        axios\n          .post(\"/refresh\", {\n            refresh_token: currentCode.refreshToken,\n          })\n          .then((res) => {\n            setAccessToken(res.data.accessToken);\n            setExpiresIn(res.data.expiresIn);\n            localStorage.setItem(\n              \"spotify-access-detail\",\n              JSON.stringify({\n                ...res.data,\n                refreshToken: currentCode.refreshToken,\n                timestamp: Date.now(),\n              })\n            );\n            setLoading(false);\n          })\n          .catch((err) => {\n            console.log(err);\n            window.location = \"/\";\n          });\n      } else {\n        // cant use token stored in local storage, back to login page\n        console.log(\"login again\");\n        setAccessToken(\"\");\n        setLoading(false);\n      }\n    }\n  }, []);\n\n  useEffect(() => {\n    // login for the first time\n    if (code) {\n      console.log(\"login first time\");\n      axios\n        .post(\"/login\", {\n          code,\n        })\n        .then((res) => {\n          localStorage.setItem(\n            \"spotify-access-detail\",\n            JSON.stringify({ ...res.data, timestamp: Date.now() })\n          );\n          setAccessToken(res.data.accessToken);\n          setRefreshToken(res.data.refreshToken);\n          setExpiresIn(res.data.expiresIn);\n          setLoading(false);\n          window.history.pushState({}, null, \"/\");\n        })\n        .catch((err) => {\n          console.log(err);\n          window.location = \"/\";\n        });\n    }\n  }, [code]);\n\n  useEffect(() => {\n    //refresh while using the app (before 1 hour)\n    const interval = setInterval(() => {\n      console.log(\"refresh while on the app\");\n      if (refreshToken && expiresIn) {\n        axios\n          .post(\"/refresh\")\n          .then((res) => {\n            setAccessToken(res.data.accessToken);\n            setExpiresIn(res.data.expiresIn);\n            localStorage.setItem(\n              \"spotify-access-detail\",\n              JSON.stringify({\n                ...res.data,\n                refreshToken,\n                timestamp: Date.now(),\n              })\n            );\n          })\n          .catch((err) => {\n            console.log(err);\n            window.location = \"/\";\n          });\n      }\n    }, (expiresIn - 300) * 1000);\n\n    if (!refreshToken) {\n      clearInterval(interval);\n    }\n\n    return () => clearInterval(interval);\n  }, [refreshToken, expiresIn]);\n\n  return { accessToken, loading };\n}\n\nexport default useToken;\n","import React, { useState, useEffect } from \"react\";\nimport Login from \"./components/Login\";\nimport Dashboard from \"./components/Dashboard\";\nimport useToken from \"./components/useToken\";\nimport { useUserContext } from \"./components/context\";\n\nfunction App() {\n  const [{ userId }, dispatch] = useUserContext();\n  const [token, setToken] = useState(\"\");\n  const [headers, setHeaders] = useState({});\n  const { accessToken, loading } = useToken();\n\n  useEffect(() => {\n    if (accessToken) {\n      setToken(accessToken);\n      setHeaders({\n        Authorization: `Bearer ${accessToken}`,\n        \"Content-Type\": \"application/json\",\n      });\n    }\n  }, [accessToken]);\n\n  const logout = () => {\n    setToken(\"\");\n    localStorage.removeItem(\"spotify-access-detail\");\n    window.history.pushState({}, null, \"/\");\n    dispatch({ type: \"SET_USER\", payload: null });\n  };\n\n  if (loading) return null;\n\n  return token ? <Dashboard headers={headers} logout={logout} /> : <Login />;\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport { ContextProvider } from \"./components/context\";\nimport { initialState, reducer } from \"./components/reducer\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <ContextProvider initialState={initialState} reducer={reducer}>\n      <App />\n    </ContextProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\nreportWebVitals();\n","export const initialState = {\n  userId: null,\n};\n\nexport const reducer = (state, action) => {\n  switch (action.type) {\n    case \"SET_USER\": {\n      return { ...state, userId: action.payload };\n    }\n\n    default:\n      return state;\n  }\n};\n"],"sourceRoot":""}